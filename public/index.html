<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>AI åŠ©æ‰‹</title>
    <link rel="stylesheet" href="style.css" />
    <!-- ç§‘æŠ€é£å­—ä½“ -->
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@700&display=swap" rel="stylesheet">

    <!-- éšè—éŸ³é¢‘ï¼šå·¦ä¸Šè§’ç‚¹å‡»éŸ³æ•ˆ -->
    <audio id="logoAudio" preload="auto">
        <source src="assets/click.mp3" type="audio/mpeg">
    </audio>

    <style>
        /* ========= é¡¶æ æ—¶é’Ÿä¸“å±æ ·å¼ ========= */
        .header-clock {
            font-family: 'Orbitron', monospace;
            font-size: 28px;
            letter-spacing: 2px;
            color: #fff;
            background: linear-gradient(135deg, #00c6ff, #0072ff);
            padding: 6px 16px;
            border-radius: 8px;
            cursor: pointer;
            user-select: none;
            box-shadow: 0 0 12px rgba(0,114,255,.55);
            transition: transform .2s;
        }

            .header-clock:hover {
                transform: scale(1.05);
            }
        /* æ—¶é’Ÿç»å¯¹å±…ä¸­ */
        .app-header {
            position: relative;
        }

        .header-clock {
            position: absolute;
            left: 50%;
            top: 50%;
            transform: translate(-50%, -50%);
            pointer-events: all;
        }
        /* å³ä¾§ç”¨æˆ·ä¿¡æ¯/é€€å‡ºæŒ‰é’®ä¿æŒé å³ */
        .header-right {
            margin-left: auto;
            display: flex;
            align-items: center;
            gap: 16px;
        }

        /* å·¦ä¸Šè§’ LOGO æ•´ä½“ç¼©å° */
        .header-left h1 {
            font-size: 18px;
            display: flex;
            align-items: center;
            gap: 6px;
            height: 60px;
            margin: 0;
            color: #ff7eb3; /* ç²‰è‰²æ–‡å­— */
            text-shadow: 0 0 8px rgba(255,126,179,.35);
        }

            .header-left h1 img,
            .header-left .logo-icon {
                width: 24px;
                height: 24px;
            }

        /* èŠå¤©æ°”æ³¡å¤´åƒç¼©å° */
        .message .avatar {
            width: 24px;
            height: 24px;
            font-size: 16px;
        }

            .message .avatar img {
                width: 24px;
                height: 24px;
            }

        /* å¯¹è¯å¤´åƒ hover æ”¾å¤§ */
        .message .avatar {
            transition: transform .25s ease;
            cursor: pointer;
        }

            .message .avatar:hover {
                transform: scale(1.25);
            }

        /* å¤åˆ¶æŒ‰é’®æ ·å¼ */
        .copy-btn {
            margin-left: 8px;
            cursor: pointer;
            font-size: 14px;
            color: #666;
            user-select: none;
            vertical-align: middle;
        }

            .copy-btn:hover {
                color: #2575fc;
            }
    </style>
</head>

<body>
    <!-- ç™»å½•/æ³¨å†ŒåŒºåŸŸï¼ˆç•¥ï¼‰ -->
    <div id="authContainer" class="auth-container">
        <div class="auth-box">
            <h2>ğŸ¤– AI åŠ©æ‰‹</h2>
            <form id="loginForm" class="auth-form">
                <h3>ç™»å½•</h3>
                <input type="text" id="loginUsername" placeholder="ç”¨æˆ·å" required />
                <input type="password" id="loginPassword" placeholder="å¯†ç " required />
                <button type="submit">ç™»å½•</button>
                <p class="toggle">æ²¡æœ‰è´¦å·ï¼Ÿ<a href="#" id="showRegister">ç«‹å³æ³¨å†Œ</a></p>
            </form>
            <form id="registerForm" class="auth-form hidden">
                <h3>æ³¨å†Œ</h3>
                <input type="text" id="registerUsername" placeholder="ç”¨æˆ·åï¼ˆè‡³å°‘3ä½ï¼‰" required minlength="3" />
                <input type="password" id="registerPassword" placeholder="å¯†ç ï¼ˆè‡³å°‘6ä½ï¼‰" required minlength="6" />
                <button type="submit">æ³¨å†Œ</button>
                <p class="toggle">å·²æœ‰è´¦å·ï¼Ÿ<a href="#" id="showLogin">ç«‹å³ç™»å½•</a></p>
            </form>
            <div id="authMessage" class="message-error"></div>
        </div>
    </div>

    <!-- ä¸»åº”ç”¨ -->
    <div id="chatApp" class="app-container hidden">
        <!-- é¡¶éƒ¨å¯¼èˆªï¼šå›¾æ ‡å¯ç‚¹ -->
        <header class="app-header">
            <div class="header-left">
                <h1 id="logoBtn" style="cursor:pointer;">
                    <img src="assets/robot.png" class="logo-icon" alt="" /> åƒæ—©AIéŸ³
                </h1>
            </div>
            <div class="header-right">
                <span id="headerClock" class="header-clock" title="ç‚¹å‡»æŸ¥çœ‹å®æ—¶æ—¶é—´"></span>
                <span id="currentUser">ç”¨æˆ·</span>
                <button id="logoutBtn" class="btn-logout">é€€å‡º</button>
            </div>
        </header>

        <div class="main-layout">
            <aside class="sidebar">
                <button id="newChatBtn" class="btn-new-chat">+ æ–°å¯¹è¯</button>
                <div class="history-title">æœ€è¿‘å¯¹è¯</div>
                <div id="historyList" class="history-list"></div>
                <button id="deleteCurrentChatBtn" class="btn-delete-chat">ğŸ—‘ï¸ åˆ é™¤å½“å‰å¯¹è¯</button>
            </aside>

            <main class="chat-main">
                <div class="chat-container" id="chatContainer"></div>
                <footer class="input-area">
                    <textarea id="userInput" placeholder="å‘ AI åŠ©æ‰‹æé—®...ï¼ˆShift+Enter æ¢è¡Œï¼‰"></textarea>
                    <button id="sendBtn">å‘é€</button>
                </footer>
            </main>
        </div>
    </div>



    <script src="script.js"></script>
    <script src="music-player.js"></script>
    <script>
        /* ===== é¡¶æ æ—¶é’Ÿé€»è¾‘ ===== */
        (function initHeaderClock() {
            const clockEl = document.getElementById('headerClock');
            if (!clockEl) return;
            const pad = n => n < 10 ? '0' + n : n;
            function updateClock() {
                const now = new Date();
                clockEl.textContent = `${pad(now.getHours())}:${pad(now.getMinutes())}:${pad(now.getSeconds())}`;
            }
            updateClock();
            setInterval(updateClock, 1000);
            clockEl.addEventListener('click', () => {
                alert('å½“å‰æ—¶é—´ï¼š' + new Date().toLocaleString('zh-CN'));
            });
        })();

        /* å·¦ä¸Šè§’å›¾æ ‡ç‚¹å‡»æ’­æ”¾éŸ³æ•ˆ */
        document.getElementById('logoBtn')?.addEventListener('click', () => {
            const audio = document.getElementById('logoAudio');
            audio.currentTime = 0;
            audio.play().catch(() => { });
        });

        /* ===== å¤åˆ¶æŒ‰é’® ===== */
        function addCopyBtn(container) {
            const copyIcon = document.createElement('span');
            copyIcon.innerHTML = 'â§‰';
            copyIcon.title = 'å¤åˆ¶';
            copyIcon.className = 'copy-btn';
            copyIcon.addEventListener('click', async () => {
                const text = container.querySelector('.text').innerText;
                try {
                    await navigator.clipboard.writeText(text);
                    copyIcon.innerHTML = 'âœ“';
                    setTimeout(() => copyIcon.innerHTML = 'â§‰', 1200);
                } catch (e) {
                    console.error('å¤åˆ¶å¤±è´¥', e);
                }
            });
            container.appendChild(copyIcon);
        }

        /* å¯¹å·²æœ‰æ¶ˆæ¯è¡¥æŒ‰é’®ï¼Œå¯¹æ–°æ¶ˆæ¯è‡ªåŠ¨æ’æŒ‰é’® */
        document.querySelectorAll('.message').forEach(addCopyBtn);
        const origAppend = Element.prototype.appendChild;
        Element.prototype.appendChild = function (node) {
            if (node.classList && node.classList.contains('message')) addCopyBtn(node);
            return origAppend.call(this, node);
        };
    </script>
    <!-- è¿·ä½ éŸ³ä¹æ’­æ”¾å™¨ -->
    <div id="miniPlayer" class="mini-player">
        <div class="player-header">
            <span class="player-title">ğŸµ éŸ³ä¹æ’­æ”¾å™¨</span>
            <button id="minimizePlayer" class="minimize-btn">âˆ’</button>
        </div>
        <div class="player-controls">
            <button id="prevBtn" class="control-btn">â®</button>
            <button id="playPauseBtn" class="control-btn play">â–¶</button>
            <button id="nextBtn" class="control-btn">â­</button>
        </div>
        <div class="player-info">
            <span id="currentSong" class="song-name">åŠ è½½ä¸­...</span>
        </div>
        <input type="range" id="volumeSlider" class="volume-slider" min="0" max="100" value="50">
    </div>

    <!-- æœ€å°åŒ–åçš„æ’­æ”¾å™¨æŒ‰é’® -->
    <button id="miniPlayerBtn" class="mini-player-btn hidden">ğŸµ</button>

    <!-- éŸ³é¢‘å…ƒç´  -->
    <audio id="audioPlayer" preload="auto"></audio>
</body>
</html>